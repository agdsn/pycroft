#!/bin/bash

set -euo pipefail

readonly USAGE=("[args]")

readonly DESCRIPTION=(
	"Run unit tests. Optional arguments are passed to the unittest module."
)

run() {
	cd /opt/pycroft/app
	exec pytest -v -m 'not legacy' "$@"
	exec pytest -v -m 'legacy' "$@"
}

[[ "$0" == "$BASH_SOURCE" ]] && run "$@" || :
