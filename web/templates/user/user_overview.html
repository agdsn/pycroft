{#
 Copyright (c) 2015 The Pycroft Authors. See the AUTHORS file.
 This file is part of the Pycroft project and licensed under the terms of
 the Apache License, Version 2.0. See the LICENSE file for details.
#}
{% extends "layout.html" %}
{% set page_title = "Nutzer√ºbersicht" %}

{% macro badge(href, title, number) %}
  <a {% if href %}href={{ href }}{% endif %} class="list-group-item">{{ title }}
    <span class="float-end badge rounded-pill bg-secondary">{{ number }}</span></a>
{% endmacro %}

{% block content %}
  <div class="row">
    <div class="col-sm-6 col-md-5 col-lg-4">
      <div class="row">
        <div class="col-12">
          <div class="list-group">
            {%- for entry in entries -%}
              {{ badge(entry['href'], entry['title'], entry['number']) }}
            {%- endfor -%}
          </div>
        </div>
      </div>
    </div>

    <div class="col-sm-6 col-md-5 col-lg-4">
    	<button class="btn btn-primary" _="
        on animate
          set :x to 20
          repeat
            log :x
            put :x into <span/> in me
            decrement :x

            wait for a cancel or 50ms
            if the result's type is 'cancel'
              set :x to 20
              break
            end
            if :x is 0
              log 'done!!!'
              remove me
              break
            end
          end
        on pointerdown
          send animate to me
        on pointerup
          send cancel to me
      ">
        <span></span>
        <i class="fa fa-trash"></i>
      </button>
      <!--<div class="btn" _="
        on pointerdown
          repeat until event pointerup
            set rand to Math.random() * 360
            transition
              *background-color
              to `hsl($rand 100% 90%)`
              over 250ms
          end
      ">
        Foo :)
      </div>-->
      <h3>Traffic Erzeuger</h3>
      <h6 class="text-muted">7 Tage</h6>

      {{ traffic_top_table.render('traffic-top-table') }}
    </div>
  </div>

{% endblock %}
